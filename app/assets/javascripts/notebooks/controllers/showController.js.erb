'use strict';

angular.module('notebookApp')
  .controller('ShowController', [
      'notebooks',
      'notebookId',
      function(notebooks, notebookId) {
        var showCtrl = this;
        showCtrl.notebooks = notebooks;
        var matches = showCtrl.notebooks.filter(function(notebook){return parseInt(notebook.id) === parseInt(notebookId)});
        showCtrl.notebook;

        if(matches.length > 0){
          showCtrl.notebook = matches[0];
        }

        var openDividerSet = function(openingDivider){
          if(openingDivider.children && openingDivider.children.length > 0){
            openingDivider = openDividerSet(openingDivider.children[0]);
          }
          else{
            return openingDivider;
          }
        }

        showCtrl.currentDivider = openDividerSet(showCtrl.notebook);
      }
  ]);
